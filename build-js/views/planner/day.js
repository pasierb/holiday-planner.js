define(["jquery","underscore","backbone","i18next","models/day"],function(e,t,n,r,i){var s=n.View.extend({className:"day-container",initialize:function(e){this.holiday=e.holiday,this.vent=e.vent,t.bindAll(this,"render"),this.vent.bind("i18n:loaded",this.render)},events:{"click .day":"dayClickHandler","setModel .day":"setModel"},dayClickHandler:function(t){t.preventDefault(),$target=e(t.target),this.toggleDay($target,$target.hasClass("leave"))},toggleDay:function(e,t){if(e.hasClass("holiday"))return;t?this.unmarkDay(e):this.markDay(e)},setModel:function(t,n){$day=e(t.target),$day.data("hpDay",n),$day.addClass("leave"),this.vent.trigger("markDay",$day,n)},markDay:function(e){var t=new Date(e.data("date")),n=new i({date:t});e.data("hpDay",n),e.addClass("leave"),this.vent.trigger("markDay",e,n)},unmarkDay:function(e){var t=e.data("hpDay");e.data("hpDay",null),e.removeClass("leave"),this.vent.trigger("unmarkDay",e,t)},render:function(){var t=this.model.get("date"),n=t.getDay()===0||t.getDay()===6?"div":"a",i,s=[n==="div"?"weekend":"day"],o="date.weekday."+t.getDay();return this.holiday&&(s.push("holiday"),i=this.holiday.name),this.$el.append(e("<div></div>",{"class":"day-label",html:r.exists(o)?r.t(o):t.getDay()})),this.$el.append(e("<"+n+"></"+n+">",{"class":s.join(" "),html:t.getDate(),title:i,"data-date":this.dateString(t)})),this},dateString:function(e){return e.getMonth()+1+"-"+e.getDate()+"-"+e.getFullYear()}});return s});